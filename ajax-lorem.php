<?php

	// textes
	$tbl_paragraphs = array(
		'Les feires et l\'s assembllaées d\'annyi arsembllent guère és syines d\'âotefeis. Ya tréjous, byin seur, des camelots, des cirques et des quevâos de brounche mais no-z-yest élugi pa le vaquierme des "moteus" et des "hâots-parleus" qui pètent, crachent, couènent et grinchent et vous cônent dans l\'s oyelles si byin que no-z-en revyint touot assoti.',
		'Âotefeis itou, cha faisait du brit mais paé dé d\'même. Ch\'était la voué, la voué des Baladins, à qui crierait le pus du ! Les pus quœurus mettaient lus mans de chaque côtaé de lus goule ; l\'s âotes gueulaient dans eun porte-voué en fer-bllainc touot cabochi :',
		'"Approchez ! Venez voir le phénomène unique au monde !" Il en \'taient touos pouossis et no-z-érait dit que lus voué sortait d\'eune chironne fêlaée. I s\'en dounaient du ma pouor enjôlaer les gens ! "Vingt centimes ! Quatre sous la place !"',
		'Les pouores gens, quaind il avaient veu eun chent de persounes, ch\'était eune bouone jouornaée ! I ramassaient déeus pistoles : vingt fraincs. Et d\'aveu cha i fallait vive, l\'houme, la fème et touote eune mouorie de quenâles crachous et morvous jusqu\'à l\'assembllaée d\'ampraès, quinze jours pus tard ou byin à chin ou syis meis dé d\'là.',
		'Le laindeman, dès le petit jouo, i ramassaient touos lus équipages dans la vuule guimbarde déhouinselaée qui gingeolait dans les mâovais quemins. A chaque mountaée, i fallait d\'cenre touote la quertaée de gens et pouossaer oû tchu pour aindyi la vuule quierne galouse qu\'en pouovait mais et halait touot chenna, qui temps qu\'i fèche, la broe à la goule et l\'s urs ébrédillis.',
		'En passaint dans les villages, touote la quenâl\'lie en chiques et nu-pyids s\'n allait pa les maisouns demaindaer la "charité" ou byin vende eun quarteroun d\'épinglles, de la néfile, des lachets ou du papyi d\'Arménie. La fème qu\'avait sus le dos sen drényi pétiot qui chuchait eune écale de coque, pronnait à sen bras gâoche, quiques petites quaires et quiques petits pannyis en ôsyi et en joun qué s\'n houme avait faits. Sus le haôt de sa tchusse dreite, s\'appiait eune bouète en boués de sape pendue oû co par eune ficelle et iyoù qu\'i yavait déeusse-treis douozonnes de bouoles de naphtalène pouor tuaer les mites.',
		'Il \'taient souovent rabrouaés et cachis. Touos les tchyins du village jappaient alentou d\'ieus. Les gens qu\'en avaient poue lus froumaient la porte oû naez et les guiettaient derryire les ridiâos de lus crouésies. Yen a qui lus baillaient byin vite eun liard ou déeus en priaint le Bouon Dieu que no les reveige pus dans le pais.',
		'Et quaind les pouores petits baladins artrouaient la rouolotte, i rechévaient des chatouornes s\'i revénaient les mans veudes. Ch\'est pourqui qué, ieus passaés, i mainquait souovent tcheu l\'épicyi eune bouète à sardènes ou eun billot de pan de chucre et, tcheu le bouolaingi, eun entoumilloun de cainté ou byin eun biscuit à soupe.',
		'Dans les gardins, le loung du quemin, no trouait des pyids de pounéterres défouis, et les herbyis de pouo\'iâos, d\'ougnouns ou de carottes avaient-z-eu, coume no dit, de la visite. Déeus poumes par chin, déeus peires par là, cha se veit guère, mais quaind la graind basse de la ferme coumptait ses bouorots en l\'s enfroumaint à fâote de jou ... yen avait parfeis ieun de mens. "Ch\'est ches mâodits baladins qui l\'s ount volaés !" que disait la fermyire. Et le pus souovent, ch\'était vrai ! Etoun-ous achteu que no veige enco dans le jouo d\'annyi, dans byin des pllèches, l\'écriteau : "Interdit aux Nomades" !',
		'No lus mettait sus le dos tous les mâos qui tumbaient sus les gens et sus les bêtes dans le trige. Eune vaque avouorte ? eun poulan s\'est piqui, eun petiot a le ma de chapelet, eun queva devyint cornard, une guerche a l\' ma de pyid, eune jonne criyateure a ryin veu dé d\'pis déeus meis ? Les Baladins sount passaés lenreit ! Les Baladins ! Les Baladins ! Les Baladins !',
		'I sount louen, les Baladins ! A déeus luues du villâge, lus guimbarde est butaée le loung du quemin. Lus queva pouossi, tierraé sus la berne, brôte l\'herbe tende sus la haie. No l\'entend parfeis étchurfaer pendaint que sen couorchibot de coue cache les taons qui le démouojuent jusqu\'oû saing sous les crôtes évraquies de ses écorcheures.',
		'Et dans la rouolotte, la famile Baladin dort, quasi tchu tout nun sus déeus vuules castalouones perchies et iordes coume touot le restaint, sans souoci des jouors à venin ! Ch\'est qu\'à ce sei, la soupe était bouone et les quenâles avaient dénichi oû pyid d\'eun quêne eune douozonne d\'oeus qu\'eune pouole qui s\'est dérobaée allait se mette à couaer. Deman, no mouog\'gea des sardènes et eun bouorot à ponne crouési qu\'est pendeu, le co teurqui, derryire la porte qui brainle és câodroles de vent de la fin de c\'té belle jouornaée d\'âot. No se laisse vive !',
		'Le père Baladin troue la veie belle et rêve d\'eun biâo cirque de syis chents pllèches tout neu qu\'est pou li, et d\'eun bel habit rouoge galounaé d\'or et d\'ergent. Et touot en dorvaillaint, i teurque sa loungue mouostache neire qui redrèche és pouentes coume sus le portrait de Gllâome II qu\'il a veu sus eun "Petit Journal Illustré" qu\'il a ramassaé c\'t\'arlevaée sus le quémin.',
		'La Baladène, lyi, se veit en amazone sus eune pouliche nerveuse, bai, byin dréchie, devaint déeus mille persounes qui tapent des mans et de biâos moussieus qui li jettent des bôquets et à qui qu\'o répound en lus enviaint du bouot de ses deigts chergis de bagues en or, des "baisers" que no-z-entend craqui sus les babènes lippues de sa gouole sans dents. Les quenâles, ieus, chuchent en dourmaint les dragies qu\'il ount grapinaées tcheu le pâtissyi.',
		'Par habitude et sans seument s\'n avisaer, i grattent touos lus puches et lus poués d\'aveu lus igres neirs et pouenteus qui fount des railes sus lus jonne pé iorde et tannaée pa le graind air et les couops de solei. Et le Baladin lâque sa mouostache pou se grattaer itou sus l\'estouma. Et le drényi "baiser" de la Baladène s\'aquiève par eun grattement sus le bas du dos. La vuule quierne, lyi, se gratte sus la reue de la guimbarde, et touot cha fait tressinaer la rouolotte qu\'à l\'air itou de se grattaer pou se peurgi de touote sa vermène ...',
		'J\'i byin conneu quiqu\'eun qu\'a passaé pus de trente annaées de sa vie à trachi à apprenre l\'aungllais és quenâles dauns eune école d\'eun gros bourg du Cotentin.',
		'Dème, quaund chu janne maîte arrivit lo l\'enreit, il avait la tête qui li mouait d\'idaées nouvelles, ombliaez paé qu\'i sortait li-même des écoles, pouor trachi à intéressi le pus possible les petiots à chu loçeis, drôle pouor yeus, qui leus disait paé byin de quei, veu que, par ichin, i prêchent tréjouos normaund, et eun miot le fraunçais, pique ch\'est ainchin dauns noute countraée. Il ount chent couops raisoun de countinuaer à prêchi leus loçeis, ch\'est paé mei qui dirait le countraire, mais cha fut quaund même eune seurprinse pouor li ! Ampraès déeus ou treis jours, eun petiot, reide avisaé, troua, de li-même, que quiques mots d\'aungllais sounaient normaund : eune quaire, eun cat, eune peire, eun gardin. Ma fei de Dû, cha quemenchait reide byin pouor le maîte !',
		'Mais, oû bouot de quiques semannes, eun quenâle s\'écryit touot à tra : "Mei, je me demaunde byin pouorqui que no z\'apprend l\'aungllais ichin ! Men frére, il a eun bouon métyi, et il a jammais fait d\' aungllais de sa vie ; cha l\'empôse paé de byin gangni sa crôte ! Qui qu\'i fait ten frére ? Il est bouochi. Eh byin, va t\'en te mette bouochi itou, tei !" (Ch\'est cha qui fit par pus tard.) Ch\'té remerque laissit le malhéreus maîte touot surgouolaé !',
		'Eun âote couop, no li rapportit qu\'eune brave fème d\'eun village aveisinaunt, byintôt touos les quenâles vyinent de la caumpane, avait dit à sa veiséne : "à l\'ecole iyoù que va men gâs, je creis qu\'i sount devenuns fos! Veyous cha : il apprend l\'aungllais ! Coume s\'il avait besouen de l\'aungllais pouor traire les vaques ! En pus de cha, janmais i mettra les pyids en Aungleterre ! Qui qu\'il irait y faire ? Eh byin, mei, je l\'en dispense !"',
		'Eun seir, quaund les parents vyinent veî les maîtes de leus petiots, la mère d\'eune gentile file fit coume cha : "Ma file a du deu en aungllais, ch\'est reide seu, ol est paé trop bouone. Mei, je vas vous dire pouorqui : ch\'est que vous lyi prêchiz aungllais padaunt les leçouns !" Dème, ch\'est paé quemode de faire âotrement ! En li-même, le maîte print cha coume eun coumplliment.',
		'Dé demême, eune âote seiraée, quaund le maîte demaundit és gens d\'eun pouor petiot : "Qui qu\'i fait oû seir, ampraès l\'école ? Apprend-t-i ses leçouns ? Qui qu\'i fait ? Il écale les peis !" Ryin de drôle qu\'il enhannait à l\'école !',
		'Eun mardi, v\'là qu\' eun quenâle se mint à dire : "Deman, ch\'est mécredi, je vyinrai paé oû matin. Eh, d\'où vyint ? Veyous, j\'irai à la pêque oû loung de la Scye ; cha sera byi muus pouor mei de happaer des trouettes que de tâchi de prêchi l\'aungllais ichin !" Et, de fait, i vint paé de la matinaée. Fâot creire que la pêque li pllaisait taunt !',
		'Cha fait que, oû bouot de quiques annaées, le maîte fut eun miot futaé. S\'il avait rêvaé eun brin, i fut mais paé loung à raterri d\'aveu touotes ches remerques ! D\'oûtaunt que, le temps qu\'i feut ilo, il en entendit byin d\'âotes. Eun mécredi, eun reide genti gamin announchit touot hâot : "Si vous creiyez que je vas faire vos leçouns ch\'t arlevaée ! J\'i de l\'ouovrage à aquevaer. I fâot que j\'épile à l\'entou de men cllos ; ch\'est pressaunt ; je peus paé tergi !" Qui que vous voulaez réponre ? Fallait que cha feusse finin, paraî ?',
		'Yavait itou eun malhéreus petiot qui li enniait à retou de temps, assis traunquilement sus sa quaire, praès de la crouésie, se câoffaunt oû solé, en espéraunt la soupe du médi. Il était tréjouos à rabâchi : "Mei, j\'y coumprends ryin à l\'aungllais, ryin de ryin ! J\'i la caboche trop dure ! Cha veurt paé rentraer ! J\'y peus ryin, ch\'est coume cha. "A n\'eun couop que les âotes quenâles vouolaient savei coume qui que no devyint maîte d\'aungllais, chu petiot là remerquit le mot "bac", le premyi équelon qu\'i fâot aveindre, promais que de poursuure des études pus loungues. Chu mot là le quétillyit, et v\'là qu\'i laquit touot à tra : "Eh byin, ma vaque, ol a sen bac itou, pouor beire de l\'iâo, byin seu !" Touote la mouerie de quenâles se mint, du couop, à éclliquetaer de rire padaunt chin minutes ! M\'est avis que chu petiot là était p\'tête paé oûssi innochent que cha, ampraès touot !',
		'Eune file aimait byin les quevâos. O passait touot sen temps libe à panagyi ses poulans et ses antennais à l\'étchurie. L\'aungllais n\'était paé sa "tasse de thé ", coume i disent. "Qui que t\'as fait hyir dinmanche l\'arlevaée ? J\'i quemenchi à débouorraer ma jument. Eh byin, veis tu, je fais la même chose que tei ; mei itou, je passe men temps à débouorraer des quettouns et, ma fei de Dû, j\'enhanne !" La petiote, d\'aveu ses uurs égaluaés, guettit le maîte eune pâose, touote éberlusaée !',
		'Padaunt eune leçoun, taundis qu\'il était en souen d\'esplliqui quique seit en aungllais, eun petiot pouossyit sen ébrai : "Y a-t-i loungtemps que vous êtes allaé par la cache du moulan ? Cha y a byin chaungi ! Fâot allaer veî" ! Les âotes en restitent la gouole souos le naez !',
		'Parfeis, erjuaé de redire chent couops la même chose, le maîte étchurfait : "baunde d\'ouées, êt-ous paé dauns le cas de faire la différence entre "yête" et "avaer" ? Si no-z-entend "j\'i eun âne" et "je sis eun âne", ch\'est-i parel?" Les syins qui coumprenaient byin ritounaient eun moment.',
		'Quaund, sus la plléche du marchi, no li demandait coument qu\'i gangnyait sa crôte, i répounait en riochinaunt : "Je tâche d\'apprenre l\'aungllais à des bourricots qui ne veulent paé se gênaer !"',
		'Allaez paé creire pouor oûtaunt qu\'il aimait paé cha qu\'i faisait. Nennin, mais, veyous, cha r\'est p\'tête paé eun métyi oûssi façile que no dit. I fâot finin par coumprenre que touos les quenâles sount paé dauns le cas d\'apprenre l\'aungllais, louen s\'en fâot ! Et coume li répétait eun de ses vuus amins, eun bouohoume de pus de quatre-vingts auns qu\'avait biâocoup d\'assent : "ch\'est paé quemode de chaungi des quettouns en quevâos de course !"',
		'Byin seu, touos les petiots étaient paé coume cha. Byin des euns étaient reide savaunts et se gênaient biâocoup pouor prêchi coume i fâot chu "horsain loçeis". Quiques euns ount susuu le même quemin et en ount fait leus métyi ! Coume no-z-entend souovent : "y a paé de sot métyi, y a que de sottes gens à les menaer !"',
		'Par pus tard, eun janne houme faisait coume cha : "J\'i reide byin apprins l\'aungllais d\'aveu chu maîte là ; ch\'était quemode ; il avait eune mannyire byin à li, l\'audiovisuel et la trique ! Ch\'est pouorqui !"'
	);
	$tbl_titles = array(
		'Eune cônèle juquie sus eun âbre',
		'Avait eun fromage dauns sen bé.',
		'Eun renard rattiraé pa l\'odeu',
		'Lyi dit à peu praès coume cha',
		'Eh, boujou tei la cônèle !',
		'Eh byin, ma fei de Du, t\'es gentile !',
		'Sauns menti, si tu chauntes oûssi byin coume t\'es gentile',
		'Ch\'est tei la Renne du boués d\'ichin !',
		'Dé de chu coup, la cônèle touote fyire',
		'Ouvrit graund sen bé… et l\'ssi le fromage tumbaer',
		'Lé renard lé happit du coup et lyi dit coume cha',
		'Ma bouone fème, les syins qui fount des croupettes',
		'Vivent à même les syins qui l\'s écoutent !',
		'Et je creis que cha vâot byin eun froumage pou la ponne !',
		'La cônèle, hounteuse et touote gênaée',
		'Promint, il \'tait byin temps !',
		'Qu\'o s\'y laisserait pus pêqui !'
	);

	function lorem_hardspace($t) {
		$t = str_replace(' !', '&nbsp;!', $t);
		$t = str_replace(' ?', '&nbsp;?', $t);
		$t = str_replace(' :', '&nbsp;:', $t);
		$t = str_replace(' ;', '&nbsp;;', $t);
		$t = str_replace(' ...', '&nbsp;...', $t);
		return $t;
	}

	// hard space
	$tbl_paragraphs = lorem_hardspace($tbl_paragraphs);
	$tbl_titles = lorem_hardspace($tbl_titles);

	// init
	$lorem = '';
	$text = '';
	$lorem_flag_title = 1;
	$p_max = count($tbl_paragraphs);
	$t_max = count($tbl_titles);

	// options
	$opt_pnb = 5; $opt_h = 0; $opt_b = 0; $opt_i = 0; $opt_l = 0; $opt_u = 0; $opt_o = 0;
	if( isset($_POST['a']) && $_POST['a'] == 'opt' ) {
		if( isset($_POST['pnb']) && is_numeric($_POST['pnb']) && $_POST['pnb'] > 0 && $_POST['pnb'] < $p_max ) { $opt_pnb = $_POST['pnb']; }
		if( isset($_POST['h']) && $_POST['h'] == 1 ) { $opt_h = 1; }
		if( isset($_POST['b']) && $_POST['b'] == 1 ) { $opt_b = 1; }
		if( isset($_POST['i']) && $_POST['i'] == 1 ) { $opt_i = 1; }
		if( isset($_POST['l']) && $_POST['l'] == 1 ) { $opt_l = 1; }
		if( isset($_POST['u']) && $_POST['u'] == 1 ) { $opt_u = 1; }
		if( isset($_POST['o']) && $_POST['o'] == 1 ) { $opt_o = 1; }
	}


	// rand texts
	shuffle($tbl_paragraphs);
	shuffle($tbl_titles);

	// returns a random number of titles based on the number of titles available and the number of paragraphs requested
	function randLorem( $min = 1, $div = 1.25 ) {
		global $tbl_titles, $opt_pnb;
		$nb_title = count($tbl_titles)-1; // number of available titles
		if( $opt_pnb > $nb_title ) { $max = $nb_title; } else { $max = $opt_pnb - 1; } // if number of paragraphs > number of titles, we adjust the max
		if( $max < $min ) { $max = $min; } // max always >= min
		$rand = round( mt_rand($min,$max) / $div ); // rand
		if( $rand < $min ) { $rand = $min; } // rand always >= min
		return $rand;
	}


	function randBIAtag( $t, $p = 'o' ) {
		global $opt_b, $opt_i, $opt_l;
		$html = '';
		if( $t == 0 && $opt_b == 0 && $opt_i == 1 ) { $t = 1; }
		if( $t == 1 && $opt_i == 0 && $opt_b == 1 ) { $t = 0; }
		if( $t == 0 && $p == 'o' && $opt_b == 1 ) { $html = '<strong>'; }
		if( $t == 0 && $p == 'c' && $opt_b == 1 ) { $html = '</strong>'; }
		if( $t == 1 && $p == 'o' && $opt_i == 1 ) { $html = '<em>'; }
		if( $t == 1 && $p == 'c' && $opt_i == 1 ) { $html = '</em>'; }
		if( $t == 2 && $p == 'o' && $opt_l == 1 ) { $html = '<a href="http://aurelien.grimpard.net">'; }
		if( $t == 2 && $p == 'c' && $opt_l == 1 ) { $html = '</a>'; }
		return $html;
	}
	function randBIA($paragraph) {

		// init
		$tbl = explode(' ', $paragraph);
		$tbl_nb = count($tbl);
		$nb_loop = round($tbl_nb / 15, PHP_ROUND_HALF_DOWN);

		// search for space for bold/italic/lien
		$tbl_rand = array();
		$tbl_bia = array();
		$tbl_tag = array();
		for( $i = 1 ; $i <= $nb_loop ; $i++ ) {
			while( in_array( ( $x = mt_rand( 0, $tbl_nb-4 ) ), $tbl_rand) );
			$rand_pos = mt_rand($x+1, $x+3);
			$rand_tag = mt_rand(0,2);
			$tbl_bia[$x] = 1;
			$tbl_bia[$rand_pos] = 0;
			$tbl_tag[$x] = $rand_tag;
			$tbl_tag[$rand_pos] = $rand_tag;
			$tbl_rand[] = $x-3;
			$tbl_rand[] = $x-2;
			$tbl_rand[] = $x-1;
			$tbl_rand[] = $x;
			$tbl_rand[] = $x+1;
			$tbl_rand[] = $x+2;
			$tbl_rand[] = $x+3;
		}

		// generate paragraph
		$p = '';
		for( $m = 0 ; $m <= $tbl_nb-1 ; $m++ ) {
			$p .= ' ';
			if( array_key_exists($m, $tbl_bia) && $tbl_bia[$m] == 1 ) {
				$p .= randBIAtag($tbl_tag[$m]);
			}
			$p .= $tbl[$m];
			if( array_key_exists($m, $tbl_bia) && $tbl_bia[$m] == 0 ) {
				$p .= randBIAtag($tbl_tag[$m],'c');
			}
		}
		$p = trim($p);

		return $p;
	}

	// title management : position of titles in relation to paragraphs (title calls)
	$opt_tnb = randLorem(); // number of titles
	$tbl_title_pos = array();
	for( $t = 1 ; $t <= $opt_tnb ; $t ++ ) {
		while( in_array( ( $x = mt_rand(0,$opt_pnb-1) ), $tbl_title_pos) );
		$tbl_title_pos[$x] = $tbl_titles[$t];
	}

	// lists UL management
	shuffle($tbl_titles);
	$opt_ulnb = randLorem(2,2); // number of items
	$opt_ul_pos = mt_rand(0,$opt_pnb-1);
	$html_ul = "\r".'<ul>';
	$text_ul = '';
	for( $li = 1 ; $li <= $opt_ulnb ; $li ++ ) {
		$html_ul .= "\r\t".'<li>'.$tbl_titles[$li].'</li>';
		$text_ul .= "\r\r".$tbl_titles[$li];
	}
	$html_ul .= "\r".'</ul>';

	// lists OL management
	shuffle($tbl_titles);
	$opt_olnb = randLorem(2,2); // number of items
	$opt_ol_pos = mt_rand(0,$opt_pnb-1);
	$html_ol = "\r".'<ol>';
	$text_ol = '';
	for( $li = 1 ; $li <= $opt_olnb ; $li ++ ) {
		$html_ol .= "\r\t".'<li>'.$tbl_titles[$li].'</li>';
		$text_ol .= "\r\r".$tbl_titles[$li];
	}
	$html_ol .= "\r".'</ol>';
	
	// generate content
	for( $p = 0 ; $p <= $opt_pnb-1 ; $p ++ ) {

		// add titles
		if( $opt_h == 1 && array_key_exists($p, $tbl_title_pos) ) {

			$lorem .= "\r".'<h'.$lorem_flag_title .'>'.$tbl_title_pos[$p].'</h'.$lorem_flag_title .'>';
			$text .= "\r\r".$tbl_title_pos[$p];

			$tmp_rand = mt_rand(-1,1); // rand 0 = no change
			if( $tmp_rand == 1 ) { $lorem_flag_title ++; }
			elseif( $tmp_rand == -1 ) { $lorem_flag_title --; }
			if( $lorem_flag_title < 1 ) { $lorem_flag_title = 1; }
			if( $lorem_flag_title > 6 ) { $lorem_flag_title = 6; }

		}

		// add paragraphs
		$lorem .= "\r".'<p>'."\r\t".randBIA($tbl_paragraphs[$p])."\r".'</p>';
		$text .= "\r\r".$tbl_paragraphs[$p];

		// add ul list
		if( $opt_u == 1 && $opt_ul_pos == $p ) { 
			$lorem .= $html_ul;
			$text .= $text_ul;
		}

		// add ol list
		if( $opt_o == 1 && $opt_ol_pos == $p ) { 
			$lorem .= $html_ol;
			$text .= $text_ol;
		}

		// clean lorem
		$lorem = str_replace('&nbsp;', ' ', $lorem);

	}

	// return
	echo '<div class="lorem-v-html">'.trim($lorem).'</div>'; // v html (0)
	echo '<pre class="lorem-v-tags">'.htmlentities($lorem).'</pre>'; // v html tags (1)
	echo '<pre class="lorem-v-text">'.trim($text).'</pre>'; // v text (2)
	

?>